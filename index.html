<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Console Vorie</title>

<!-- CodeMirror 5 (simpler to include) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/dracula.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/clike/clike.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/xml/xml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/htmlmixed/htmlmixed.min.js"></script>

<!-- JSZip for export ZIP -->
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

<style>
:root{
  --bg:#071227; --panel:#0f1724; --muted:#9fb0c8; --text:#e6eef8; --accent:#60a5fa;
  --soft:#0b1a2a; --radius:10px; --trans:240ms;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#061226,#04101a);color:var(--text);height:100vh;display:flex;flex-direction:column}
header{height:56px;display:flex;align-items:center;padding:8px 12px;border-bottom:1px solid rgba(255,255,255,0.03)}
.brand{display:flex;gap:12px;align-items:center}
.hamb{width:44px;height:44px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;cursor:pointer}
.header-title{font-weight:600}
.header-sub{font-size:12px;color:var(--muted)}
.app{display:flex;flex:1;overflow:hidden}
.sidebar{width:300px;background:var(--panel);padding:12px;border-right:1px solid rgba(255,255,255,0.03);transform:translateX(0);transition:all var(--trans);display:flex;flex-direction:column;gap:12px}
.menu button{display:block;width:100%;text-align:left;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);cursor:pointer;margin-bottom:6px}
.menu button.active{background:linear-gradient(90deg, rgba(96,165,250,0.08), transparent)}
.content{flex:1;display:flex;flex-direction:column;padding:12px;gap:12px;overflow:auto}
.top-controls{display:flex;gap:8px;align-items:center}
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:8px}
#editorHolder{flex:1;display:flex;gap:12px;min-height:300px}
#leftCol{flex:1;display:flex;flex-direction:column;gap:8px}
#rightCol{width:420px;display:flex;flex-direction:column;gap:8px}
.cm-surface{height:100%}
.output{background:var(--soft);padding:10px;border-radius:8px;min-height:120px;white-space:pre-wrap;overflow:auto}
.preview{width:100%;height:280px;border-radius:8px;border:1px solid rgba(255,255,255,0.02)}
.files-list{overflow:auto;max-height:40vh;border-radius:6px;padding:6px;background:rgba(255,255,255,0.02)}
.file-item{padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.02);margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}
.terminal{background:#000;color:#bcd;padding:8px;border-radius:8px;height:160px;overflow:auto;font-family:monospace;font-size:13px}
.terminal-input{width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text)}
.tools{display:flex;gap:8px;flex-wrap:wrap}
.small{font-size:12px;color:var(--muted)}
.kbd{background:rgba(255,255,255,0.02);padding:4px 6px;border-radius:6px;font-family:monospace}
.btn{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);cursor:pointer}
.footer{height:36px;display:flex;align-items:center;padding:6px 12px;border-top:1px solid rgba(255,255,255,0.02);font-size:12px;color:var(--muted)}
/* Responsive */
@media (max-width:900px){
  .sidebar{position:fixed;left:0;top:56px;bottom:0;z-index:70;transform:translateX(-110%);transition:transform var(--trans)}
  .sidebar.open{transform:translateX(0)}
  .app{padding-top:0}
  #rightCol{width:100%}
  #editorHolder{flex-direction:column}
}
.light{ --bg:#f6fbff; --panel:#ffffff; --muted:#475569; --text:#071227; --soft:#f3f6fb }
</style>
</head>
<body>

<header>
  <div class="brand">
    <div id="hamb" class="hamb"><span style="font-weight:700">≡</span></div>
    <div>
      <div class="header-title">VORIE Console</div>
      <div class="header-sub">Made With ❤️ By Xgtib</div>
    </div>
  </div>
  <div style="flex:1"></div>
  <div class="small kbd">Ctrl/Cmd + Enter = Run</div>
  <div style="width:10px"></div>
  <button id="themeToggle" class="btn">Toggle Theme</button>
</header>

<div class="app">
  <aside id="sidebar" class="sidebar">
    <div>
      <div class="small" style="margin-bottom:6px">Menu</div>
      <div class="menu">
        <button data-view="editor" class="active">Editor</button>
        <button data-view="files">File Manager</button>
        <button data-view="calc">Calculator</button>
        <button data-view="tools">Tools</button>
        <button data-view="vor">More By Xgtib</button>
      </div>
    </div>

    <div style="margin-top:auto">
      <div class="small" style="margin-bottom:6px">Export</div>
      <div class="tools">
        <button id="downloadZip" class="btn">Export .zip</button>
        <button id="exportIndex" class="btn">Export index</button>
      </div>
    </div>
  </aside>

  <main class="content">
    <div class="top-controls" style="gap:12px">
      <div style="display:flex;gap:8px;align-items:center">
        <label class="small">Language</label>
        <select id="langSelect">
          <option value="cpp">C++</option>
          <option value="c">C</option>
          <option value="python">Python</option>
          <option value="java">Java</option>
          <option value="js">JavaScript</option>
          <option value="html">HTML/CSS/JS</option>
        </select>
        <button id="run" class="btn">Run</button>
        <button id="stop" class="btn">Stop</button>
        <button id="downloadFile" class="btn">Download File</button>
      </div>
      <div style="flex:1"></div>
      <div class="small">V7 • No ChatGPT</div>
    </div>

    <div id="editorHolder">
      <div id="leftCol">
        <div class="panel" style="min-height:360px;display:flex;flex-direction:column">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="small">Editor</div>
            <div style="display:flex;gap:8px;align-items:center">
              <input id="saveName" placeholder="file name (ex: main.cpp)" style="padding:6px;border-radius:6px;background:transparent;border:1px solid rgba(255,255,255,0.03)"/>
              <button id="saveFile" class="btn">Save</button>
              <button id="openFile" class="btn">Open</button>
            </div>
          </div>

          <div id="editor" style="flex:1;border-radius:8px;overflow:hidden;margin-top:8px">
            <textarea id="codeArea"></textarea>
          </div>

          <div style="margin-top:8px">
            <div class="small">Output</div>
            <pre id="out" class="output">—</pre>
          </div>
        </div>
      </div>

      <div id="rightCol">
        <div class="panel">
          <div class="small">Preview / Terminal</div>
          <div id="previewWrap" style="display:block">
            <iframe id="previewFrame" class="preview"></iframe>
          </div>

          <div style="margin-top:8px">
            <div class="small">Terminal</div>
            <div id="terminal" class="terminal"></div>
            <input id="termInput" class="terminal-input" placeholder="Type command (eg: echo hello) and press Enter">
          </div>
        </div>

        <div class="panel">
          <div class="small">File Manager</div>
          <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
            <input id="fileInput" type="file" />
            <button id="uploadBtn" class="btn">Upload</button>
            <button id="clearIndex" class="btn">Clear Index</button>
          </div>
          <div style="margin-top:8px" id="filesList" class="files-list"></div>
        </div>
      </div>
    </div>

    <!-- Calculator & Tools views (simple) -->
    <div id="viewsPanels">
      <div id="view-calc" style="display:none" class="panel">
        <div class="small">Calculator</div>
        <input id="calcIn" placeholder="2*(3+4)" style="padding:8px;border-radius:6px"/>
        <div style="margin-top:8px"><button id="calcBtn" class="btn">Eval</button></div>
        <pre id="calcOut" class="output">—</pre>
      </div>

      <div id="view-tools" style="display:none" class="panel">
        <div class="small">Tools</div>
        <button id="importIndex" class="btn">Import index (.json)</button>
        <input id="importFile" type="file" style="display:none"/>
        <div style="margin-top:8px" class="small">Terminal history persists per session.</div>
      </div>
    </div>

  </main>
</div>

<div class="footer">VORIE IDE v7 — single file. Edit CONFIG in script for JsonBin/Judge0</div>

<!-- LIBS: JSZip already included above -->
<script>
/* ============================
   VORIE v7 — Main Script
   ============================ */

/* Utilities */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
const rand = () => 'id-'+Math.random().toString(36).slice(2,9);
function now(){ return new Date().toISOString(); }
function logOut(m){ const o = $('#out'); o.textContent = now() + ' › ' + m + '\\n' + o.textContent; }

/* Elements */
const sidebar = $('#sidebar'), hamb = $('#hamb');
const menuBtns = $$('.menu button');
const langSelect = $('#langSelect'), runBtn = $('#run'), stopBtn = $('#stop');
const codeArea = $('#codeArea'), saveName = $('#saveName'), saveFileBtn = $('#saveFile'), openFileBtn = $('#openFile');
const filesList = $('#filesList'), uploadBtn = $('#uploadBtn'), fileInput = $('#fileInput'), clearIndexBtn = $('#clearIndex');
const previewFrame = $('#previewFrame'), previewWrap = $('#previewWrap');
const outEl = $('#out'), terminal = $('#terminal'), termInput = $('#termInput');
const downloadZipBtn = $('#downloadZip'), downloadFileBtn = $('#downloadFile'), exportIndexBtn = $('#exportIndex');
const calcIn = $('#calcIn'), calcBtn = $('#calcBtn'), calcOut = $('#calcOut');
const importIndexBtn = $('#importIndex'), importFile = $('#importFile');

/* State */
let localIndex = JSON.parse(localStorage.getItem('vorie_v7_index') || '[]');
let cmEditor = null;
let jsRunnerIframe = null;

/* Hidden config (edit here to enable remote features) */
const CONFIG = {
  JSONBIN_KEY: "-",    // paste your jsonbin master key if needed
  JSONBIN_BIN: "-",    // bin id
  JUDGE0_HOST: "https://console-vorie.p.rapidapi.com/",    // e.g. https://judge0-ce.p.rapidapi.com
  JUDGE0_KEY: "ca42f31774msh7600ed543ac9995p1b02dajsn068052506cfd",     // optional
};

/* THEME toggle */
$('#themeToggle').addEventListener('click', ()=>{
  document.body.classList.toggle('light');
});

/* Sidebar toggle (mobile) */
hamb.onclick = ()=> sidebar.classList.toggle('open');

/* Menu views (Editor / Files / Calc / Tools) */
menuBtns.forEach(b=>{
  b.onclick = ()=>{
    menuBtns.forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    const v = b.dataset.view;
    // hide all optional panels:
    $('#view-calc').style.display = 'none';
    $('#view-tools').style.display = 'none';
    // show
    if(v === 'editor'){ document.getElementById('editorHolder').style.display = 'flex'; $('#view-calc').style.display='none'; $('#view-tools').style.display='none'; }
    if(v === 'files'){ document.getElementById('editorHolder').style.display = 'flex'; $('#view-calc').style.display='none'; $('#view-tools').style.display='none'; }
    if(v === 'calc'){ document.getElementById('editorHolder').style.display = 'none'; $('#view-calc').style.display='block'; }
    if(v === 'tools'){ document.getElementById('editorHolder').style.display = 'none'; $('#view-tools').style.display='block'; }
    // mobile close
    if(window.innerWidth < 900) sidebar.classList.remove('open');
  };
});

/* Initialize CodeMirror */
function initEditor(){
  if(cmEditor) return;
  cmEditor = CodeMirror.fromTextArea(codeArea, {
    mode: 'text/x-c++src',
    lineNumbers: true,
    theme: 'dracula',
    indentUnit: 2,
    viewportMargin: Infinity
  });
  cmEditor.setSize('100%', '360px');
  window.addEventListener('resize', ()=> cmEditor.setSize('100%', Math.max(240, window.innerHeight - 380) + 'px'));
}
initEditor();

/* map lang -> mode */
function setEditorMode(lang){
  if(!cmEditor) return;
  if(lang === 'cpp' || lang === 'c') cmEditor.setOption('mode','text/x-c++src');
  else if(lang === 'java') cmEditor.setOption('mode','text/x-java');
  else if(lang === 'python') cmEditor.setOption('mode','python');
  else if(lang === 'js') cmEditor.setOption('mode','javascript');
  else if(lang === 'html') cmEditor.setOption('mode','htmlmixed');
}
langSelect.addEventListener('change', ()=> setEditorMode(langSelect.value));

/* load default code if none */
if(!localIndex.length){
  const defaultCpp = `#include <iostream>\nusing namespace std;\nint main(){ cout<<\"Hello Vorie v7!\\n\"; return 0; }`;
  cmEditor.setValue(defaultCpp);
} else {
  cmEditor.setValue(localIndex[0].code || '');
}

/* File Manager render */
function renderFiles(){
  filesList.innerHTML = '';
  localIndex.forEach(f=>{
    const row = document.createElement('div'); row.className='file-item';
    row.innerHTML = `<div><strong>${f.fileName}.${f.fileType}</strong><div class="small">${f.savedAt||''}</div></div>
      <div style="display:flex;gap:6px">
        <button class="btn load" data-id="${f.id}">Load</button>
        <button class="btn dl" data-id="${f.id}">DL</button>
        <button class="btn del" data-id="${f.id}">Del</button>
      </div>`;
    filesList.appendChild(row);
  });
  $$('.load').forEach(b=> b.onclick = ()=>{
    const id = b.dataset.id; const it = localIndex.find(x=>x.id===id); if(!it) return;
    cmEditor.setValue(it.code);
    saveName.value = `${it.fileName}.${it.fileType}`;
    logOut(`Loaded ${it.fileName}.${it.fileType}`);
  });
  $$('.dl').forEach(b=> b.onclick = ()=>{
    const id = b.dataset.id; const it = localIndex.find(x=>x.id===id); if(!it) return;
    const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([it.code],{type:'text/plain'})); a.download=`${it.fileName}.${it.fileType}`; a.click(); a.remove();
  });
  $$('.del').forEach(b=> b.onclick = ()=>{
    if(!confirm('Hapus file dari index?')) return;
    const id = b.dataset.id; localIndex = localIndex.filter(x=>x.id!==id); localStorage.setItem('vorie_v7_index', JSON.stringify(localIndex)); renderFiles();
  });
}
renderFiles();

/* Upload handler (local only) */
uploadBtn.onclick = async ()=>{
  const f = fileInput.files[0];
  if(!f) return alert('Pilih file dulu');
  const txt = await f.text();
  const parts = f.name.split('.'); const ext = parts.pop(); const name = parts.join('.');
  localIndex.unshift({ id: rand(), fileName: name, fileType: ext, code: txt, savedAt: now() });
  localStorage.setItem('vorie_v7_index', JSON.stringify(localIndex));
  renderFiles();
  logOut(`Uploaded ${name}.${ext}`);
};

/* Save from editor */
saveFileBtn.onclick = ()=>{
  const nameRaw = saveName.value.trim(); if(!nameRaw.includes('.')) return alert('Format: name.ext');
  const p = nameRaw.split('.'); const ext = p.pop(); const name = p.join('.');
  const code = cmEditor.getValue();
  localIndex.unshift({ id: rand(), fileName: name, fileType: ext, code, savedAt: now() });
  localStorage.setItem('vorie_v7_index', JSON.stringify(localIndex));
  renderFiles();
  logOut(`Saved ${name}.${ext}`);
};

/* Open file chooser -> load into editor */
openFileBtn.onclick = ()=> fileInput.click();

/* Clear index */
clearIndexBtn.onclick = ()=>{ if(confirm('Clear all local index?')){ localIndex=[]; localStorage.removeItem('vorie_v7_index'); renderFiles(); logOut('Cleared index'); } };

/* Terminal simple */
function termWrite(line){ terminal.textContent += line + '\\n'; terminal.scrollTop = terminal.scrollHeight; }
termInput.addEventListener('keydown', e=>{
  if(e.key === 'Enter'){ const cmd = termInput.value.trim(); if(!cmd) return; termWrite('> ' + cmd); // simple echo commands
    if(cmd.startsWith('echo ')) termWrite(cmd.slice(5));
    else if(cmd === 'ls') termWrite(localIndex.map(f=>f.fileName+'.'+f.fileType).join('\\n')||'(empty)');
    else termWrite('Unknown command: '+cmd);
    termInput.value = ''; }
});

/* Run / JS Runner (fixed) */
runBtn.addEventListener('click', async ()=>{
  const lang = langSelect.value;
  const code = cmEditor.getValue();
  outEl.textContent = 'Running...';
  previewWrap.style.display = 'none';

  // stop previous js runner if exist
  if(jsRunnerIframe){ jsRunnerIframe.remove(); jsRunnerIframe = null; }

  if(lang === 'html'){
    previewWrap.style.display = 'block';
    // srcdoc with scripts allowed
    previewFrame.removeAttribute('sandbox');
    previewFrame.srcdoc = code;
    outEl.textContent = 'HTML rendered (srcdoc).';
    return;
  }

  if(lang === 'js'){
    // create hidden iframe, attach message listener
    const iframe = document.createElement('iframe'); iframe.style.display = 'none';
    document.body.appendChild(iframe);
    jsRunnerIframe = iframe;

    // cleanup listener when removed
    function onMsg(e){
      if(!e.data || e.data.src !== 'vjs') return;
      logOut(e.data.msg);
    }
    window.addEventListener('message', onMsg);

    const wrapped = `
      <script>
      (function(){
        const send=(m)=>parent.postMessage({src:'vjs', msg: m}, '*');
        console.log = (...a)=>send(a.join(' '));
        console.error = (...a)=>send('ERR: '+a.join(' '));
        window.onerror = (m,s,l)=>send('ERR: '+m+' @'+l);
        try { ${code} } catch(e){ send('ERR: '+e.toString()); }
      })();
      <\/script>`;
    iframe.srcdoc = wrapped;
    logOut('JS running in iframe');
    return;
  }

  if(lang === 'python'){
    // pyodide on demand
    outEl.textContent = 'Loading pyodide...';
    if(!window.loadPyodide) {
      await new Promise((res,rej)=>{ const s=document.createElement('script'); s.src='https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js'; s.onload=res; s.onerror=rej; document.head.appendChild(s); });
    }
    if(!window.pyodide){
      window.pyodide = await loadPyodide({ indexURL: 'https://cdn.jsdelivr.net/pyodide/v0.23.4/full/' });
    }
    try{
      let out=[]; window.pyodide.setStdout({batched:false, stdout: s=> out.push(s)}); window.pyodide.setStderr({batched:false, stderr: s=> out.push('ERR: '+s)});
      await window.pyodide.runPythonAsync(code);
      outEl.textContent = out.join('\\n') || '(no output)';
    }catch(err){ outEl.textContent = 'Py error: '+err; }
    return;
  }

  // compiled languages -> Wandbox fallback
  const compilerMap = { c:'gcc-head', cpp:'gcc-head', java:'openjdk-head' };
  const compiler = compilerMap[lang] || 'gcc-head';
  const payload = { code, compiler, options: 'warning' };
  try{
    const res = await fetch('https://wandbox.org/api/compile.json', { method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify(payload) });
    const j = await res.json();
    outEl.textContent = j.program_output || j.compiler_output || JSON.stringify(j);
  }catch(err){ outEl.textContent = 'Compile error: '+err.message; }
});

/* Stop button */
stopBtn.addEventListener('click', ()=>{
  if(jsRunnerIframe) { jsRunnerIframe.remove(); jsRunnerIframe = null; logOut('[JS stopped]'); }
});

/* Download file (current editor content) */
downloadFileBtn.addEventListener('click', ()=>{
  const name = saveName.value.trim() || ('code-'+Date.now()+'.txt');
  const blob = new Blob([cmEditor.getValue()], { type:'text/plain' });
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = name; a.click(); a.remove();
});

/* Export ZIP of all files (JSZip) */
downloadZipBtn.addEventListener('click', async ()=>{
  const zip = new JSZip();
  if(!localIndex.length) return alert('No files to zip');
  localIndex.forEach(f => zip.file(`${f.fileName}.${f.fileType}`, f.code));
  const blob = await zip.generateAsync({type:'blob'});
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'vorie-project.zip'; a.click(); a.remove();
});

/* Export index JSON */
exportIndexBtn.addEventListener('click', ()=>{
  const blob = new Blob([JSON.stringify(localIndex,null,2)], { type:'application/json' });
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'vorie-index.json'; a.click(); a.remove();
});

/* Import index (.json) */
importIndexBtn.onclick = ()=> importFile.click();
importFile.addEventListener('change', ()=>{
  const f = importFile.files[0]; if(!f) return;
  const r = new FileReader(); r.onload = e=>{
    try{ const arr = JSON.parse(e.target.result); if(Array.isArray(arr)){ localIndex = arr.concat(localIndex); localStorage.setItem('vorie_v7_index', JSON.stringify(localIndex)); renderFiles(); alert('Import OK'); } else alert('Invalid JSON'); } catch(err){ alert('Import error: '+err.message); }
  }; r.readAsText(f);
});

/* Calculator */
calcBtn.onclick = ()=> {
  try{ calcOut.textContent = eval(calcIn.value); } catch(e){ calcOut.textContent = 'ERR: '+e.message; }
};

/* Keyboard shortcuts */
document.addEventListener('keydown', e=>{
  if((e.ctrlKey||e.metaKey) && e.key === 'Enter'){ e.preventDefault(); runBtn.click(); }
  if((e.ctrlKey||e.metaKey) && e.key === 's'){ e.preventDefault(); saveFileBtn.click(); }
});

/* persist on unload */
window.addEventListener('beforeunload', ()=> {
  try{ localStorage.setItem('vorie_v7_index', JSON.stringify(localIndex)); }catch(e){}
});

/* Auto render files */
function renderFiles(){ // rebind small to update
  filesList.innerHTML = '';
  localIndex.forEach(f=>{
    const div = document.createElement('div'); div.className='file-item';
    div.innerHTML = `<div><strong>${f.fileName}.${f.fileType}</strong><div class="small">${f.savedAt||''}</div></div>
      <div style="display:flex;gap:6px">
        <button class="btn loadF" data-id="${f.id}">Load</button>
        <button class="btn dlF" data-id="${f.id}">DL</button>
        <button class="btn delF" data-id="${f.id}">Del</button>
      </div>`;
    filesList.appendChild(div);
  });
  $$('.loadF').forEach(b=> b.onclick = ()=>{
    const it = localIndex.find(x=>x.id === b.dataset.id); if(!it) return;
    cmEditor.setValue(it.code); saveName.value = `${it.fileName}.${it.fileType}`; logOut('Loaded '+it.fileName+'.'+it.fileType);
  });
  $$('.dlF').forEach(b=> b.onclick = ()=> {
    const it = localIndex.find(x=>x.id === b.dataset.id); if(!it) return;
    const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([it.code],{type:'text/plain'})); a.download=`${it.fileName}.${it.fileType}`; a.click(); a.remove();
  });
  $$('.delF').forEach(b=> b.onclick = ()=> {
    if(!confirm('Hapus file?')) return;
    localIndex = localIndex.filter(x=>x.id !== b.dataset.id); localStorage.setItem('vorie_v7_index', JSON.stringify(localIndex)); renderFiles();
  });
}

/* initial render */
renderFiles();

console.log('VORIE v7 ready (no ChatGPT). Edit CONFIG at top of script to enable remote features.');
</script>
</body>
</html>
